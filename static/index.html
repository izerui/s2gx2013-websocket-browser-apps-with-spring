<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>What's New In Spring MVC 3.2</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/showoff.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none">
  <div class="content subsection" ref="overview/slides/1">
<h1>What's New in Spring MVC 3.2</h1>

<br><br>


<h2>Rossen Stoyanchev</h2>

<h3><em>VMware</em></h3>
</br>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="overview/slides/2">
<h1>presentation source</h1>

<h2><a href="https://github.com/rstoyanchev/spring-mvc-32-update">https://github.com/rstoyanchev/spring-mvc-32-update</a></h2>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets" ref="overview/slides/3">
<h1>Quick Recap and Timeline</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="overview/slides/4">
<h1>Spring 3.0 / Dec 2009</h1>

<ul>
<li>Comprehensive REST support</li>
<li>Evolved @MVC programming model</li>
<li>Type conversion sub-system</li>
<li>MVC namespace</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="overview/slides/5">
<h1>Spring 3.1 / Dec 2011</h1>

<ul>
<li>Point release</li>
<li>Nothing too significantly different or new</li>
<li>Straight-forward refinements of the Spring 3 model</li>
<li>Still, plenty of new features...</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="overview/slides/6">
<h1>Spring 3.1 Recap</h1>

<ul>
<li>MVC Java config and Servlet 3 web container initialization</li>
<li>Revised @MVC infrastructure</li>
<li>@RequestMapping(consumes="", produces="")</li>
<li>Redirect and flash attributes</li>
<li>URI vars (data binding, redirect URLs, rendering)</li>
<li>UriComponentsBuilder</li>
<li>@RequestPart and Servlet 3 mulitpart requests</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="overview/slides/7">
<h1>Spring 3.2 / Dec 2012</h1>

<ul>
<li>Servlet 3 async support</li>
<li>Error reporting in REST scenarios</li>
<li>Content negotiation strategies</li>
<li>Matrix variables</li>
<li>Spring MVC Test Framework</li>
<li>and more</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="async/slides/1">
<h1>Servlet 3 Async Support</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="async/slides/2">
<h1>HTTP Request-Response Semantics</h1>

<ul>
<li>Client makes a request</li>
<li>Server handles it and responds</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="async/slides/3">
<h1>Ajax Requests</h1>

<ul>
<li>Obtain new data without reloading entire page</li>
<li>Pages appear more dynamic and live</li>
<li>Still the same request-response semantics</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="async/slides/4">
<h1>Varying Degrees of "Live"-ness</h1>

<ul>
<li>Sometimes okay for client to poll every few minutes</li>
<li>Mail, Twitter, even "breaking" news</li>
<li>In other cases, it's just not real-time enough</li>
<li>Chat, collaboration, trading/finance</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="async/slides/5">
<h1>Long Polling</h1>

<ul>
<li>Client sends request and waits...</li>
<li>Server holds and doesn't respond until new data arrives</li>
<li>Client sends request and waits...</li>
<li>Server holds and doesn't respond until new data arrives</li>
<li>and so on</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="async/slides/6">
<h1>Long Polling Effect</h1>

<ul>
<li>Simulates server-side push</li>
<li>In most cases more effective than polling while using identical HTTP request-response semantics</li>
<li>However requests remain open for much longer</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="async/slides/7">
<h1>Servlet Containers</h1>

<ul>
<li>Traditionally thread-per-request</li>
<li>Long polling would quickly exhaust container threads</li>
<li>Hence the need for Servlet 3 async support</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="async/slides/8">
<h1>Servlet Thread Model</h1>

<pre><code>  [Servlet Thread]
      Start processing
      Do some work 
      Send response
</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="async/slides/9">
<h1>Servlet 3 Async Thread Model</h1>

<pre><code>  [Servlet Thread]
      Start processing
      Switch to async mode
      Exit thread leaving response open








  .
</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="async/slides/10">
<h1>Servlet 3 Async Thread Model</h1>

<pre><code>  [Servlet Thread]
      Start processing
      Switch to async mode
      Exit thread leaving response open

  [Application Thread]
      Produce or receive result
      Dispatch to container to resume processing




  .
</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="async/slides/11">
<h1>Servlet 3 Async Thread Model</h1>

<pre><code>  [Servlet Thread]
      Start processing
      Switch to async mode
      Exit thread leaving response open

  [Application Thread]
      Produce or receive result
      Dispatch to container to resume processing

  [Servlet Thread]
      Start processing
      Process result from application thread
      Send response
</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/12">
<h1>Why Not Send Response From Application Thread?</h1>

<ul>
<li>We tried that in milestone 1</li>
<li>HttpServletRequest not usable in non-container thread</li>
<li>Cannot forward (e.g. no JSP rendering) or rely on various other request properties</li>
<li>Response should really be finalized within container</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content" ref="async/slides/13">
<h1>Servlet 3 Async Support<br> in Spring MVC</br>
</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/14">
<h1><code>@RequestMapping</code> return values</h1>

<ul>
<li><code>java.util.concurrent.Callable</code></li>
<li><code>DeferredResult</code></li>
<li><code>AsyncTask</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/15">
<h1>java.util.concurrent.Callable</h1>

<ul>
<li>Produce value from <code>@RequestMapping</code> asynchronously</li>
<li>In thread <strong>managed by</strong> Spring MVC</li>
<li>Long-running DB job, 3rd party REST API call, ...</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/16">
<h1>DeferredResult</h1>

<ul>
<li>Produce value from <code>@RequestMapping</code> asynchronously</li>
<li>In thread <strong>managed outside</strong> Spring MVC</li>
<li>JMS or AMQP listener, another HTTP request</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/17">
<h1>AsyncTask</h1>

<ul>
<li>Same as returning <code>Callable</code> with extras</li>
<li>Override timeout value for async processing</li>
<li>Select specific <code>AsyncTaskExecutor</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content" ref="async/slides/18">
<h1>Demo</h1>

<h2><em>Async request execution and log output</em></h2>

<p><a href="https://github.com/springsource/spring-mvc-showcase">Spring MVC Showcase</a></p>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/19">
<h1>Exceptions From <code>Callable</code></h1>

<ul>
<li>Saved and handled after the dispatch</li>
<li>Through the <code>HandlerExceptionResolver</code> mechanism</li>
<li>Like any exception from <code>@RequestMapping</code> methods</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/20">
<h1>Exceptions with <code>DeferredResult</code></h1>

<ul>
<li><code>DeferredResult</code> provides <code>setErrorResult(Object)</code></li>
<li>Set an Exception or some alternative error value</li>
<li>Exception handled after the dispatch</li>
<li>Through the <code>HandlerExceptionResolver</code> mechanism</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/21">
<h1>Servlet Filters</h1>

<ul>
<li>Must have the <code>async-supported</code> flag in web.xml</li>
<li>Can be executed from more than one thread</li>
<li><code>OncePerRequestFilter</code> (+ all Spring MVC filters)<br> have been updated</br>
</li>

</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/22">
<h1>Handler Interception</h1>

<ul>
<li><code>AsyncHandlerInterceptor</code></li>
<li>Intercept handler execution in container threads</li>
<li><code>afterConcurrentHandlingStarted</code> vs <code>postProcess</code>/<code>afterCompletion</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none">
  <div class="content small bullets incremental" ref="async/slides/23">
<h1>Configuring Async Support</h1>

<ul>
<li>MVC Java Config<br> <code>WebMvcConfigurer.configureAsyncSupport</code></br>
<li>MVC namespace<br> <code>async-support</code> sub-element of <code>annotation-driven</code></br>
</li>

</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/24">
<h1>What Can Be Configured?</h1>

<ul>
<li>Async timeout value (milliseconds)</li>
<li><code>AsyncTaskExecutor</code> for <code>Callable</code> processing</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/25">
<h1><code>web.xml</code> Configuration</h1>

<ul>
<li><code>async-supported</code> flag on all Filters and Servlet</li>
<li><code>dispatcher-type</code> of <code>ASYNC</code> for Filters</li>
<li>Can be a bit repetitive</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="async/slides/26">
<h1><code>WebApplicationInitializer</code></h1>

<h2>Abstract Class Hierarchy</h2>

<ul>
<li>Servlet 3+ Java-based, container initialization</li>
<li>Registers a DispatcherServlet</li>
<li>Takes care of boilerplate</li>
<li>Sets <code>async-supported</code> flag and <code>dispatcher-type</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="async/slides/27">
<pre class="sh_java"><code>public class DispatcherServletInitializer extends
      AbstractAnnotationConfigDispatcherServletInitializer {

  protected Class&lt;?&gt;[] getRootConfigClasses() {
    return new Class&lt;?&gt;[] { RootConfig.class };
  }

  protected Class&lt;?&gt;[] getServletConfigClasses() {
      return new Class&lt;?&gt;[] { WebMvcConfig.class };
  }

  protected String[] getServletMappings() {
      return new String[] { "/" };
  }

  protected Filter[] getServletFilters() {
      return new Filter[] { new OpenSessionInViewFilter() };
  }

}</code></pre>
</div>
</div><div class="slide" data-transition="none">
  <div class="content" ref="async/slides/28">
<h1>References</h1>

<br>


<p>Async tab in <a href="https://github.com/springsource/spring-mvc-showcase">Spring MVC Showcase</a></p>

<br>


<p><a href="https://github.com/rstoyanchev/spring-mvc-chat">Chat Sample</a></p>

<br>


<p><a href="https://github.com/SpringSource/spring-amqp-samples/tree/spring-mvc-async">Spring AMQP Stocks</a></p>

<br>


<p><a href="http://blog.springsource.org/2012/05/06/spring-mvc-3-2-preview-introducing-servlet-3-async-support/">Blog series</a></p>
</br>
</br>
</br></br></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="error-handling/slides/1">
<h1>Error reporting in REST scenarios</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="error-handling/slides/2">
<h1>Traditional Web vs REST API</h1>

<ul>
<li>In traditional, easy to present an error page</li>
<li>In REST API more varied responses</li>
<li>Communicate with status codes</li>
<li>Commonly write helpful details to response body</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="error-handling/slides/3">
<h1>What Is Needed?</h1>

<ul>
<li>Application-specific, application-wide strategy to write details to the response body</li>
<li>Including standard (internal) Spring MVC exceptions</li>
<li>Global <code>@ExceptionHandler</code></li>
<li>Some alternative to <code>DefaultHandlerExceptionResovler</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="error-handling/slides/4">
<h1>Global <code>@ExceptionHandler</code> Methods</h1>

<ul>
<li><code>@ControllerAdvice</code> - component annotation</li>
<li>Add <code>@ExceptionHandler</code> methods</li>
<li>Nothing else to configure</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="error-handling/slides/5">
<h1>Other Uses Cases for <code>@ControllerAdvice</code></h1>

<ul>
<li><code>@InitBinder</code> methods</li>
<li>Global <code>DataBinder</code> initialization</li>
<li><code>@ModelAttribute</code> methods</li>
<li>Global "pre" handling</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="error-handling/slides/6">
<h1><code>ResponseEntityExceptionHandler</code></h1>

<ul>
<li>Alternative to <code>DefaultHandlerExceptionResolver</code></li>
<li>Protected methods for each exception return <code>ResponseEntity&lt;Object&gt;</code></li>
<li>Makes it easy to write error details to the response body</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="error-handling/slides/7">
<h1>Servlet Container Error Page</h1>

<ul>
<li>HTML formatted error page</li>
<li>For response status codes 4xx and 5xx</li>
<li>Or with <code>response.sendError(int, String)</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="error-handling/slides/8">
<h1>Custom Error Page (Servlet 3+)</h1>

<ul>
<li><code>error-page</code> in web.xml</li>
<li>Don't map to exception type or status</li>
<li>Location only (JSP page, even controller URL)</li>
<li>Status and message available in request attributes <code>"javax.servlet.error.status_code"</code> <code>"javax.servlet.error.message"</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content" ref="error-handling/slides/9">
<h1>References</h1>

<p>See updated section on <a href="http://static.springsource.org/spring-framework/docs/3.2.0.BUILD-SNAPSHOT/reference/htmlsingle/#mvc-exceptionhandlers">Exception Handling</a> in reference docs</p>

<p>Global exception in <a href="https://github.com/springsource/spring-mvc-showcase">Spring MVC Showcase</a></p>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="content-negotiation/slides/1">
<h1>Content Negotiation Strategies</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="content-negotiation/slides/2">
<h1>Prior to Spring 3.2</h1>

<ul>
<li><code>@ResponseBody</code> used <code>'Accept'</code> header</li>
<li><code>@RequestMapping(produces="")</code> did likewise</li>
<li>While <code>ContentNegotiatingViewResolver</code> ...</li>
<li>offered many additional options</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="content-negotiation/slides/3">
<h1><code>ContentNegotiationStrategy</code></h1>

<h2>(Spring 3.2)</h2>

<ul>
<li>By <code>'Accept'</code> Header</li>
<li>By URL extension (.xml, .json, etc)</li>
<li>By Request parameter, i.e. <code>/accounts/1?format=json</code></li>
<li>Fixed content type, i.e. a fallback option</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="content-negotiation/slides/4">
<h1><code>ContentNeogitationManager</code></h1>

<ul>
<li>Configured with one or more instances of <code>ContentNegotiationStrategy</code></li>
<li>Plugged into various places</li>
<li><code>RequestMappingHandlerMapping</code> <code>RequestMappingHandlerAdapter</code> <code>ExceptionHandlerExceptionResolver</code></li>
<li><code>ContentNegotiatingViewResolver</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="content-negotiation/slides/5">
<h1>Default Settings</h1>

<h2>(<strong>without</strong> MVC Java Config &amp; Namespace)</h2>

<ul>
<li><code>'Accept'</code> header only</li>
<li>Matches existing defaults for <code>@ResponseBody</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="content-negotiation/slides/6">
<h1>MVC Java Config &amp; Namespace</h1>

<ul>
<li>Path extension 1st, <code>'Accept'</code> header 2nd</li>
<li><code>.json</code>, <code>.xml</code> auto-registered if libraries present</li>
<li>Matches defaults of <code>ContentNegotiatingViewResolver</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none">
  <div class="content" ref="content-negotiation/slides/7">
<h1>References</h1>

<br>


<br>


<p>See section on <a href="http://static.springsource.org/spring-framework/docs/3.2.0.BUILD-SNAPSHOT/reference/htmlsingle/#new-in-3.2-webmvc-content-negotiation">Configuring Content Negotiation</a> in reference docs</p>

<br>


<p>URL extension for content negotiation in <a href="https://github.com/springsource/spring-mvc-showcase">Spring MVC Showcase</a></p>
</br>
</br>
</br></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="matrix-variables/slides/1">
<h1>Matrix Variables</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="matrix-variables/slides/2">
<h1>What Are They?</h1>

<ul>
<li>Originally mentioned in <a href="http://www.w3.org/DesignIssues/MatrixURIs.html">Tim Berners-Lee post</a></li>
<li>The term is not used in RFC URI spec</li>
<li>However it is most commonly used</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content" ref="matrix-variables/slides/3">
<h2>"Each path segment may include a sequence of parameters, indicated by the semicolon ";" character. The parameters are not significant to the parsing of relativeb references."</h2>

<p><a href="http://www.ietf.org/rfc/rfc2396.txt">RFC 2396</a>, section 3.3</p>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="matrix-variables/slides/4">
<h2>"The semicolon (";") and equals ("=") reserved characters are <strong>often used to</strong> delimit parameters and parameter values applicable to that segment.  The comma (",") reserved character is <strong>often used for</strong> similar purposes."</h2>

<p><a href="http://tools.ietf.org/html/rfc3986#section-3.3">RFC 3986, section 3.3</a></p>
</div>
</div><div class="slide" data-transition="none">
  <div class="content small incremental bullets" ref="matrix-variables/slides/5">
<h1>Two Types of Usage</h1>

<ul>
<li>As path segment name-value pairs</li>
<li><a href="http://wiki.jfrog.org/confluence/display/RTF/Using+Properties+in+Deployment+and+Resolution">JFrog API</a><br>
<code>/qa-releases;buildNumber=135;revision=3.2</code></br>
<li>As delimited list path segment</li>
<li><a href="http://api.stackexchange.com/docs/comments-on-answers">StackExchange API</a><br>
<code>/answers/id1;id2;id3;id4/comments</code></br>
</li>

</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content small incremental bullets" ref="matrix-variables/slides/6">
<h1>How To Use In Spring MVC</h1>

<ul>
<li>If you expect ";" content in a path segment</li>
<li>Represent the path segment with a URI variable</li>
<li>Declare one or more <code>@MatrixVariable</code> args</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="matrix-variables/slides/7">
<h1>The Common Case</h1>

<pre class="sh_java"><code>// GET /pets/42;q=11;r=22

@RequestMapping(value = "/pets/{petId}")
public void findPet(
    @PathVariable String petId, @MatrixVariable int q) {

  // petId == 42
  // q == 11

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="matrix-variables/slides/8">
<h1>Obtain All Matrix Variables</h1>

<pre class="sh_java"><code>// GET /owners/42;q=11;r=12/pets/21;q=22;s=23

@RequestMapping(value = "/owners/{ownerId}/pets/{petId}")
public void findPet(
    @MatrixVariable Map&lt;String, String&gt; matrixVars) {

    // matrixVars: ["q" : [11,22], "r" : 12, "s" : 23]

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="matrix-variables/slides/9">
<h1>Qualify Path Segment</h1>

<pre class="sh_java"><code>// GET /owners/42;q=11/pets/21;q=22

@RequestMapping(value = "/owners/{ownerId}/pets/{petId}")
public void findPet(
    @MatrixVariable(value="q", pathVar="ownerId") int q1,
    @MatrixVariable(value="q", pathVar="petId") int q2) {    

  // q1 == 11
  // q2 == 22

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="matrix-variables/slides/10">
<h1>References</h1>

<br>


<p>Section on <a href="http://static.springsource.org/spring-framework/docs/3.2.0.BUILD-SNAPSHOT/reference/htmlsingle/#mvc-ann-matrix-variables">Matrix Variables</a> in reference docs</p>
</br>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="spring-test-mvc/slides/1">
<h1>Spring MVC Test Framework</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="spring-test-mvc/slides/2">
<h1><code>MockHttpServletRequest/Response</code></h1>

<ul>
<li>Stub implementations</li>
<li><code>spring-test</code> module</li>
<li>Very commonly used in controller unit tests</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="spring-test-mvc/slides/3">
<h1>Better Controller Unit Tests</h1>

<ul>
<li>Take existing controller unit tests</li>
<li>Invoke controllers through <code>DispatcherServlet</code></li>
<li>Using fluent API</li>
<li>Based on actual Spring MVC configuration</li>
<li>Without a Servlet container</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="spring-test-mvc/slides/4">
<h1>Example</h1>

<pre class="sh_java"><code>
mockMvc.perform(get("/foo").accept("application/json"))
  .andExpect(status().isOk())
  .andExpect(content().mimeType("application/json"))
  .andExpect(jsonPath("$.name").value("Lee"));</code></pre>
</div>
</div><div class="slide" data-transition="none">
  <div class="content" ref="spring-test-mvc/slides/5">
<p>Tests in <a href="https://github.com/SpringSource/spring-mvc-showcase/tree/master/src/test/java/org/springframework/samples/mvc">Spring MVC Showcase</a></p>

<br>


<br>


<p><a href="https://github.com/SpringSource/spring-framework/tree/master/spring-test-mvc/src/test/java/org/springframework/test/web/client/samples">Client</a> and <a href="https://github.com/SpringSource/spring-framework/tree/master/spring-test-mvc/src/test/java/org/springframework/test/web/servlet/samples">Server</a> sample tests in the Spring Framework</p>

<br>


<br>


<p><a href="http://www.springone2gx.com/conference/washington/2012/10/session?id=27664">Testing Web Applications with Spring 3.2</a></p>

<p>(Thursday 10:15)</p>
</br>
</br>
</br></br></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="other/slides/1">
<h1>Other Improvements</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller bullets incremental" ref="other/slides/2">
<h1><code>GenericHttpMessageConverter</code></h1>

<ul>
<li>Read <code>HttpInputMessage</code> to generic target type</li>
<li>Supported with Jackson JSON library</li>
<li>Also <code>Jaxb2CollectionHttpMessageConverter</code></li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="other/slides/3">
<h1><code>RestTemplate</code></h1>

<h2>Response with Generic Type</h2>

<pre class="sh_java"><code>

ParameterizedTypeReference&lt;List&lt;Integer&gt;&gt; listOfInts =
    new ParameterizedTypeReference&lt;List&lt;Integer&gt;&gt;() {};


ResponseEntity&lt;List&lt;Integer&gt;&gt; result =
    restTemplate.exchange(
        "http://example.com/accounts",
        HttpMethod.GET, null, listOfInts);</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content small" ref="other/slides/4">
<h1><code>@RequestBody</code></h1>

<h2>Generic Method Argument</h2>

<pre class="sh_java"><code>
@RequestMapping
public void handle(@RequestBody List&lt;Integer&gt; ints) {

}</code></pre>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="other/slides/5">
<h1>HTTP PATCH method</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="other/slides/6">
<h1>Jackson JSON 2</h1>
</div>
</div><div class="slide" data-transition="none"><div class="content smaller" ref="other/slides/7">
<h1><code>JacksonObjectMapperFactoryBean</code></h1>
</div>
</div><div class="slide" data-transition="none"><div class="content small bullets incremental" ref="end/slides/1">
<h1>Next?</h1>

<ul>
<li>WebSocket support</li>
<li>Servlet 3.1</li>
<li>Externalized request mappings</li>
<li>Declarative caching</li>
</ul>

</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="end/slides/2">
<h1>Questions?</h1>
</div>
</div><div class="slide" data-transition="none">
  <div class="content subsection" ref="end/slides/3">
<h1>Thank You!</h1>

<br><br>


<p>Twitter</p>

<p><a href="http://twitter.com/rstoya05">@rstoya05</a></p>
</br>
</br>
</div>
</div></div>

</body>
</html>
